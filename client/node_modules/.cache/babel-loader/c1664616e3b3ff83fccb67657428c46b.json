{"ast":null,"code":"var _jsxFileName = \"/Users/chris_1/repos/weekly assignments/shop-shop/client/src/components/Cart/index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect } from \"react\";\nimport { idbPromise } from \"../../utils/helpers\";\nimport CartItem from \"../CartItem\";\nimport Auth from \"../../utils/auth\";\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\nimport \"./style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Cart = () => {\n  _s();\n\n  const [state, dispatch] = useStoreContext();\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise('cart', 'get');\n      dispatch({\n        type: ADD_MULTIPLE_TO_CART,\n        products: [...cart]\n      });\n    }\n\n    ;\n\n    if (!state.cart.length) {\n      getCart();\n    }\n  }, [state.cart.length, dispatch]);\n\n  function toggleCart() {\n    dispatch({\n      type: TOGGLE_CART\n    });\n  }\n\n  function calculateTotal() {\n    let sum = 0;\n    state.cart.forEach(item => {\n      sum += item.price * item.purchaseQuantity;\n    });\n    return sum.toFixed(2);\n  }\n\n  if (!state.cartOpen) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"cart-closed\",\n      onClick: toggleCart,\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        role: \"img\",\n        \"aria-label\": \"trash\",\n        children: \"\\uD83D\\uDED2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 37,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"cart\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"close\",\n      onClick: toggleCart,\n      children: \"[close]\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Shopping Cart\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 7\n    }, this), state.cart.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [state.cart.map(item => /*#__PURE__*/_jsxDEV(CartItem, {\n        item: item\n      }, item._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 13\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-row space-between\",\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: [\"Total: $\", calculateTotal()]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this), Auth.loggedIn() ? /*#__PURE__*/_jsxDEV(\"button\", {\n          children: \"Checkout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 17\n        }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"(log in to check out)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 17\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"h3\", {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        role: \"img\",\n        \"aria-label\": \"shocked\",\n        children: \"\\uD83D\\uDE31\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 13\n      }, this), \"You haven't added anything to your cart yet!\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 46,\n    columnNumber: 5\n  }, this);\n};\n\n_s(Cart, \"rQAXY7WJETFBPd/2qDFOpQS/df8=\", false, function () {\n  return [useStoreContext];\n});\n\n_c = Cart;\nexport default Cart;\n\nvar _c;\n\n$RefreshReg$(_c, \"Cart\");","map":{"version":3,"names":["React","useEffect","idbPromise","CartItem","Auth","useStoreContext","TOGGLE_CART","ADD_MULTIPLE_TO_CART","Cart","state","dispatch","getCart","cart","type","products","length","toggleCart","calculateTotal","sum","forEach","item","price","purchaseQuantity","toFixed","cartOpen","map","_id","loggedIn"],"sources":["/Users/chris_1/repos/weekly assignments/shop-shop/client/src/components/Cart/index.js"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { idbPromise } from \"../../utils/helpers\"\nimport CartItem from \"../CartItem\";\nimport Auth from \"../../utils/auth\";\nimport { useStoreContext } from \"../../utils/GlobalState\";\nimport { TOGGLE_CART, ADD_MULTIPLE_TO_CART } from \"../../utils/actions\";\nimport \"./style.css\";\n\nconst Cart = () => {\n  const [state, dispatch] = useStoreContext();\n\n  useEffect(() => {\n    async function getCart() {\n      const cart = await idbPromise('cart', 'get');\n      dispatch({ type: ADD_MULTIPLE_TO_CART, products: [...cart] });\n    };\n\n    if (!state.cart.length) {\n      getCart();\n    }\n  }, [state.cart.length, dispatch]);\n\n  function toggleCart() {\n    dispatch({ type: TOGGLE_CART });\n  }\n\n  function calculateTotal() {\n    let sum = 0;\n    state.cart.forEach(item => {\n      sum += item.price * item.purchaseQuantity;\n    });\n    return sum.toFixed(2);\n  }\n\n  if (!state.cartOpen) {\n    return (\n      <div className=\"cart-closed\" onClick={toggleCart}>\n        <span\n          role=\"img\"\n          aria-label=\"trash\">ðŸ›’</span>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"cart\">\n      <div className=\"close\" onClick={toggleCart}>[close]</div>\n      <h2>Shopping Cart</h2>\n      {state.cart.length ? (\n        <div>\n          {state.cart.map(item => (\n            <CartItem key={item._id} item={item} />\n          ))}\n\n          <div className=\"flex-row space-between\">\n            <strong>Total: ${calculateTotal()}</strong>\n\n            {\n              Auth.loggedIn() ?\n                <button>\n                  Checkout\n              </button>\n                :\n                <span>(log in to check out)</span>\n            }\n          </div>\n        </div>\n      ) : (\n          <h3>\n            <span role=\"img\" aria-label=\"shocked\">\n              ðŸ˜±\n          </span>\n          You haven't added anything to your cart yet!\n          </h3>\n        )}\n    </div>\n  );\n};\n\nexport default Cart;\n"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,OAAOC,QAAP,MAAqB,aAArB;AACA,OAAOC,IAAP,MAAiB,kBAAjB;AACA,SAASC,eAAT,QAAgC,yBAAhC;AACA,SAASC,WAAT,EAAsBC,oBAAtB,QAAkD,qBAAlD;AACA,OAAO,aAAP;;;AAEA,MAAMC,IAAI,GAAG,MAAM;EAAA;;EACjB,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBL,eAAe,EAAzC;EAEAJ,SAAS,CAAC,MAAM;IACd,eAAeU,OAAf,GAAyB;MACvB,MAAMC,IAAI,GAAG,MAAMV,UAAU,CAAC,MAAD,EAAS,KAAT,CAA7B;MACAQ,QAAQ,CAAC;QAAEG,IAAI,EAAEN,oBAAR;QAA8BO,QAAQ,EAAE,CAAC,GAAGF,IAAJ;MAAxC,CAAD,CAAR;IACD;;IAAA;;IAED,IAAI,CAACH,KAAK,CAACG,IAAN,CAAWG,MAAhB,EAAwB;MACtBJ,OAAO;IACR;EACF,CATQ,EASN,CAACF,KAAK,CAACG,IAAN,CAAWG,MAAZ,EAAoBL,QAApB,CATM,CAAT;;EAWA,SAASM,UAAT,GAAsB;IACpBN,QAAQ,CAAC;MAAEG,IAAI,EAAEP;IAAR,CAAD,CAAR;EACD;;EAED,SAASW,cAAT,GAA0B;IACxB,IAAIC,GAAG,GAAG,CAAV;IACAT,KAAK,CAACG,IAAN,CAAWO,OAAX,CAAmBC,IAAI,IAAI;MACzBF,GAAG,IAAIE,IAAI,CAACC,KAAL,GAAaD,IAAI,CAACE,gBAAzB;IACD,CAFD;IAGA,OAAOJ,GAAG,CAACK,OAAJ,CAAY,CAAZ,CAAP;EACD;;EAED,IAAI,CAACd,KAAK,CAACe,QAAX,EAAqB;IACnB,oBACE;MAAK,SAAS,EAAC,aAAf;MAA6B,OAAO,EAAER,UAAtC;MAAA,uBACE;QACE,IAAI,EAAC,KADP;QAEE,cAAW,OAFb;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IADF;MAAA;MAAA;MAAA;IAAA,QADF;EAOD;;EAED,oBACE;IAAK,SAAS,EAAC,MAAf;IAAA,wBACE;MAAK,SAAS,EAAC,OAAf;MAAuB,OAAO,EAAEA,UAAhC;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAEE;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QAFF,EAGGP,KAAK,CAACG,IAAN,CAAWG,MAAX,gBACC;MAAA,WACGN,KAAK,CAACG,IAAN,CAAWa,GAAX,CAAeL,IAAI,iBAClB,QAAC,QAAD;QAAyB,IAAI,EAAEA;MAA/B,GAAeA,IAAI,CAACM,GAApB;QAAA;QAAA;QAAA;MAAA,QADD,CADH,eAKE;QAAK,SAAS,EAAC,wBAAf;QAAA,wBACE;UAAA,uBAAiBT,cAAc,EAA/B;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,EAIIb,IAAI,CAACuB,QAAL,kBACE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADF,gBAKE;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QATN;MAAA;QAAA;QAAA;QAAA;MAAA,QALF;IAAA;MAAA;MAAA;MAAA;IAAA,QADD,gBAoBG;MAAA,wBACE;QAAM,IAAI,EAAC,KAAX;QAAiB,cAAW,SAA5B;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF;IAAA;MAAA;MAAA;MAAA;IAAA,QAvBN;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAiCD,CArED;;GAAMnB,I;UACsBH,e;;;KADtBG,I;AAuEN,eAAeA,IAAf"},"metadata":{},"sourceType":"module"}